{% extends "teastore/base.html" %}

{% block title %}Szczegoly zamowienia{% endblock %}

{% block content %}
<h2>Zamowienie #{{ order.id }}</h2>

<div class="card">
    <p><strong>Uzytkownik:</strong> {{ order.user }}</p>
    <p><strong>Status:</strong> {{ order.get_status_display }}</p>
    <p><strong>Data utworzenia:</strong> {{ order.created_at }}</p>
    <p><strong>Data dostawy:</strong> {{ order.delivery_date|default:"-" }}</p>
    <p><strong>Notatka:</strong> {{ order.note|default:"-" }}</p>
</div>

<h3>Pozycje zamowienia</h3>
{% if items %}
    {% for item in items %}
        <div class="card">
            <p><strong>Herbata:</strong> {{ item.tea }}</p>
            <p><strong>Ilosc:</strong> {{ item.quantity }}</p>
            <p><strong>Cena jednostkowa:</strong> {{ item.unit_price }}</p>
            <p><strong>Wartosc:</strong> {{ item.unit_price|floatformat:2 }} x {{ item.quantity }}</p>
        </div>
    {% endfor %}
    <div class="card">
        <p><strong>Suma:</strong> {{ total_price|floatformat:2 }}</p>
    </div>
{% else %}
    <p>Brak pozycji w tym zamowieniu.</p>
{% endif %}

<form method="post" class="actions">
    {% csrf_token %}
    <a href="{% url 'order-list-html' %}">Powrot</a>
    {% if user.is_staff or user.is_superuser %}
        <button type="submit">Usun</button>
    {% endif %}
</form>
{% endblock %}
